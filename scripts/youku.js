(function(){var k=document.addEventListener?function(a,b,c){b.addEventListener(a,c,!1)}:document.attachEvent?function(a,b,c){b.attachEvent("on"+a,c)}:function(a,b,c){b["on"+a]=c},l=/[\n\t]/g,m=/\s+/,n=function(a){var b=[];try{b=Array.prototype.slice.call(a,0)}catch(c){for(var b=[],d=0,e;e=a[d++];)b.push(e)}return b},p=function(a,b){if(b&&"string"===typeof b||void 0===b){var c=(b||"").split(m);if(1===a.nodeType&&a.className)if(b){for(var d=(" "+a.className+" ").replace(l," "),e=0,g=c.length;e<g;e++)d=
d.replace(" "+c[e]+" "," ");a.className=o(d)}else a.className=""}},i=function(a,b,c){b=b||document;if(b.getElementsByClassName)return n(b.getElementsByClassName(a));for(var a=a.replace(/\-/g,"\\-"),d=[],b=b||document,c=n(b.getElementsByTagName(c||"*")),b=c.length,a=RegExp("(^|\\s)"+a+"(\\s|$)");b--;)a.test(c[b].className)&&d.push(c[b]);return d},q=function(a,b){if("undefined"!==a.length)for(var c=0,d=a.length;c<d&&!1!==b.call(a[c],c,a[c]);c++);else for(name in a)b.call(a[name],name,a[name])},o=function(a){return a.replace(/^(\s|\u00A0)+/,
"").replace(/(\s|\u00A0)+$/,"")};if(document.getElementById("ykv_youku-video")){var r=i("ykv_video"),h=function(a){q(r,function(){var b=this.getAttribute("youkuid");a==b&&this.click()})},s=document.getElementById("ykv_youku-video").offsetWidth,t=parseInt(3*s/4);h();q(r,function(){var a=this;k("click",a,function(){var b;b=0<=(" "+a.className+" ").replace(l," ").indexOf(" selected ")?!0:!1;if(!b){b=a.getAttribute("youkuid");var c=i("selected",document.getElementById("ykv_youku-video"),"a"),d=a.parentNode.parentNode;
c.length&&p(c[0],"selected");c="selected".split(m);if(1===a.nodeType)if(a.className){for(var e=" "+a.className+" ",g=a.className,j=0,h=c.length;j<h;j++)0>e.indexOf(" "+c[j]+" ")&&(g+=" "+c[j]);a.className=o(g)}else a.className="selected";(c=i("ykv_video-preview")[0])&&c.parentNode&&c.parentNode.removeChild(c);var f=document.createElement("div"),c="<iframe height="+t+" width="+s+' src="http://player.youku.com/embed/'+b+'" frameborder=0 allowfullscreen></iframe>';f.className="ykv_video-preview";f.innerHTML=
'<div class="ykv_video-player">'+c+'</div><div class="ykv_video-close"></div>';d&&d.parentNode&&d.parentNode.insertBefore(f,d.nextSibling);document.body.scrollTop=a.offsetTop+105;document.documentElement.scrollTop=a.offsetTop+105;k("click",i("ykv_video-close")[0],function(){f&&f.parentNode&&f.parentNode.removeChild(f);p(a,"selected")});window.location.hash="#"+b;document.title=a.title;window.console&&console.log("Going to play %s page %s",document.title,"http://v.youku.com/v_show/id_"+b+".html")}})});
k("hashchange",window,function(){h(window.location.hash.replace(/#/,""))});h(window.location.hash.replace(/#/,""))}})();